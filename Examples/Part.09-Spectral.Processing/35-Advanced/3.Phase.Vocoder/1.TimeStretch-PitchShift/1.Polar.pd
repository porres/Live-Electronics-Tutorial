#N canvas 414 42 567 612 12;
#X declare -path else;
#X obj 183 454 nbx 5 19 -1e+37 1e+37 0 0 empty \$0-speed empty 0 -8 0 15 #dcdcdc #000000 #000000 0 256;
#X obj 276 454 nbx 5 17 -1e+37 1e+37 0 0 empty \$0-transpo empty 0 -8 0 15 #dcdcdc #000000 #000000 0 256;
#X obj 90 454 tgl 19 0 empty empty empty 17 7 0 10 #dcdcdc #000000 #000000 0 1;
#X text 85 432 Play;
#X text 292 432 Cents;
#X obj 90 534 out~;
#X text 186 432 Speed (%);
#N canvas 249 23 1013 716 Pitch.Shift-Time.Stretch 0;
#X obj 178 208 +;
#X obj 267 108 * 2048;
#X obj 118 31 inlet;
#X obj 267 31 inlet;
#X obj 66 32 inlet;
#X obj 27 145 f;
#X obj 18 114 bang~;
#X obj 267 205 / 4;
#X obj 27 207 t f f;
#X obj 27 170 spigot;
#X obj 66 113 tgl 15 0 empty empty empty 17 7 0 10 #dcdcdc #000000 #000000 0 1;
#X text 67 11 Play;
#X obj 267 246 nbx 5 14 -1e+37 1e+37 0 0 empty empty empty 0 -8 0 10 #dcdcdc #000000 #000000 0 256;
#X floatatom 267 148 5 0 0 0 - - - 0;
#X obj 132 133 r \$0-size;
#X text 142 165 loop;
#X obj 100 164 wrap2;
#X obj 118 60 / 100;
#X text 117 11 Speed (%);
#X obj 118 91 * 512;
#X text 162 93 hop size;
#X obj 100 134 +;
#X obj 267 79 cents2ratio;
#X text 320 107 window size;
#X text 276 168 new window size;
#X text 325 244 new hop size;
#X text 213 10 transposition (cents), f 13;
#X obj 88 361 tabread4~ \$0-sample;
#X obj 238 361 tabread4~ \$0-sample;
#X obj 88 301 -~;
#X obj 277 283 r \$0-size;
#X text 290 323 loop;
#X obj 88 330 wrap2~;
#X obj 238 321 wrap2~;
#X obj 88 264 envgen~;
#X obj 341 202 block~ 2048 4;
#X obj 272 674 outlet~;
#X obj 233 577 rifft~;
#X obj 272 637 /~ 3072;
#X obj 278 493 -~;
#X obj 88 419 rfft~;
#X obj 238 419 rfft~;
#X obj 88 394 hann~;
#X obj 238 394 hann~;
#X obj 272 609 hann~;
#X obj 78 446 car2pol~;
#X obj 225 449 car2pol~;
#X obj 225 546 pol2car~;
#X text 144 446 back;
#X text 294 448 front;
#X obj 278 518 +~;
#X text 96 507 Phase Accumulation =====>;
#X text 500 15 So we have a counter that adds a step parameter \, which depends on a speed the hop size. This happens at every block because of the [bang~] object. The transposition defines a new grain size and also a new hop size., f 63;
#N canvas 197 78 1195 739 Phase-Accum 0;
#X obj 236 265 cnv 15 198 68 empty empty empty 20 12 0 14 #c4c4fc #404040 0;
#X obj 287 195 cnv 15 198 68 empty empty empty 20 12 0 14 #fcfcc4 #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array frame2 100 float 1;
#A 0 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684535 0.637415 0.587779 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627903 1.10827e-07 -0.0627901 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929764 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.9921 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.48994e-06 0.0627986 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802;
#X coords 0 1 99 -1 200 70 1;
#X restore 286 194 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array frame1 100 float 1;
#A 0 8.59499e-06 0.0627987 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728963 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684535 0.637415 0.587779 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627903 1.45286e-07 -0.06279 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817;
#X coords 0 1 99 -1 200 70 1;
#X restore 235 264 graph;
#X obj 287 97 cnv 15 198 68 empty empty empty 20 12 0 14 #fcfcc4 #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array frame3 100 float 1;
#A 0 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684535 0.637415 0.587779 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627903 1.10827e-07 -0.0627901 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929764 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.9921 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.48994e-06 0.0627986 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802;
#X coords 0 1 99 -1 200 70 1;
#X restore 286 97 graph;
#X obj 337 28 cnv 15 198 68 empty empty empty 20 12 0 14 #c4fcc4 #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array frame4 100 float 1;
#A 0 7.54979e-08 -0.0627901 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.58778 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929764 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.9921 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.52533e-06 0.0627987 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728963 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627904;
#X coords 0 1 99 -1 200 70 1;
#X restore 336 27 graph;
#X obj 34 638 cnv 15 398 68 empty empty empty 20 12 0 14 #c4c4fc #404040 0;
#X obj 134 568 cnv 15 398 68 empty empty empty 20 12 0 14 #fcfcc4 #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array new-frame1 200 float 1;
#A 0 8.59499e-06 0.0627987 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728963 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684535 0.637415 0.587779 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627903 1.45286e-07 -0.06279 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.45455e-06 0.0627986 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309013 0.248686 0.187379 0.125332 0.0627905 2.85916e-07 -0.0627899 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728956 -0.770502 -0.809009 -0.844325 -0.876305 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904816 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637409 -0.587773 -0.535818 -0.481746 -0.425769 -0.368112 -0.309004 -0.248678 -0.18737 -0.125324 -0.0627819;
#X coords 0 1 199 -1 400 70 1;
#X restore 33 637 graph;
#N canvas 0 22 450 300 (subpatch) 0;
#X array new-frame2 200 float 1;
#A 0 7.54979e-08 -0.0627901 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.58778 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929764 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.9921 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.52533e-06 0.0627987 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728963 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627904 2.16067e-07 -0.06279 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876305 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904816 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637409 -0.587773 -0.535818 -0.481746 -0.425769 -0.368112 -0.309004 -0.248678 -0.18737 -0.125324 -0.0627818 8.3847e-06 0.0627985 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637421 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309013 0.248686 0.187379 0.125332 0.0627905;
#X coords 0 1 199 -1 400 70 1;
#X restore 133 567 graph;
#X obj 84 452 cnv 15 398 68 empty empty empty 20 12 0 14 #fce090 #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array new-frame3 200 float 1;
#A 0 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684535 0.637415 0.587779 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627903 1.10827e-07 -0.0627901 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929764 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.9921 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.48994e-06 0.0627986 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309013 0.248686 0.187379 0.125332 0.0627904 2.50526e-07 -0.0627899 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876305 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904816 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637409 -0.587773 -0.535818 -0.481746 -0.425769 -0.368112 -0.309004 -0.248678 -0.18737 -0.125324 -0.0627818 8.34931e-06 0.0627985 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637421 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802;
#X coords 0 1 199 -1 400 70 1;
#X restore 83 451 graph;
#X obj 185 382 cnv 15 398 68 empty empty empty 20 12 0 14 #74e4bc #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array new-frame4 200 float 1;
#A 0 -1 -0.998019 -0.9921 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627816 8.55979e-06 0.0627987 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728963 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684535 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627904 1.80677e-07 -0.06279 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904816 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637409 -0.587773 -0.535818 -0.481746 -0.425769 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627818 8.42009e-06 0.0627986 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309013 0.248686 0.187379 0.125332 0.0627905 3.21306e-07 -0.0627898 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728956 -0.770502 -0.809009 -0.844325 -0.876305 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019;
#X coords 0 1 199 -1 400 70 1;
#X restore 184 381 graph;
#X obj 751 572 cnv 15 398 68 empty empty empty 20 12 0 14 #70d0d0 #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array accumulated-phase_frame4 200 float 1;
#A 0 8.59499e-06 0.0627987 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728963 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684535 0.637415 0.587779 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627903 1.45286e-07 -0.06279 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.45455e-06 0.0627986 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309013 0.248686 0.187379 0.125332 0.0627905 2.85916e-07 -0.0627899 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728956 -0.770502 -0.809009 -0.844325 -0.876305 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904816 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637409 -0.587773 -0.535818 -0.481746 -0.425769 -0.368112 -0.309004 -0.248678 -0.18737 -0.125324 -0.0627819;
#X coords 0 1 199 -1 400 70 1;
#X restore 750 571 graph;
#X obj 650 642 cnv 15 398 68 empty empty empty 20 12 0 14 #fcfcc4 #404040 0;
#N canvas 0 22 450 300 (subpatch) 0;
#X array new-frame2 200 float 1;
#A 0 7.54979e-08 -0.0627901 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.58778 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876306 -0.904819 -0.929764 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.9921 -0.982269 -0.968564 -0.951038 -0.92976 -0.904815 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637408 -0.587773 -0.535818 -0.481746 -0.425768 -0.368112 -0.309004 -0.248678 -0.18737 -0.125323 -0.0627817 8.52533e-06 0.0627987 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637422 0.684542 0.728963 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309012 0.248686 0.187379 0.125332 0.0627904 2.16067e-07 -0.06279 -0.125332 -0.187378 -0.248686 -0.309012 -0.36812 -0.425776 -0.481753 -0.535825 -0.587779 -0.637415 -0.684536 -0.728957 -0.770502 -0.809009 -0.844325 -0.876305 -0.904819 -0.929763 -0.95104 -0.968566 -0.982271 -0.992102 -0.998019 -1 -0.998019 -0.992101 -0.982269 -0.968564 -0.951038 -0.92976 -0.904816 -0.876301 -0.84432 -0.809004 -0.770497 -0.728951 -0.68453 -0.637409 -0.587773 -0.535818 -0.481746 -0.425769 -0.368112 -0.309004 -0.248678 -0.18737 -0.125324 -0.0627818 8.3847e-06 0.0627985 0.12534 0.187387 0.248694 0.30902 0.368128 0.425784 0.481761 0.535832 0.587786 0.637421 0.684542 0.728962 0.770508 0.809014 0.844329 0.87631 0.904823 0.929767 0.951043 0.968568 0.982273 0.992103 0.99802 1 0.998019 0.992101 0.98227 0.968565 0.951039 0.929763 0.904818 0.876305 0.844324 0.809008 0.770501 0.728956 0.684536 0.637415 0.58778 0.535825 0.481754 0.425776 0.36812 0.309013 0.248686 0.187379 0.125332 0.0627905;
#X coords 0 1 199 -1 400 70 1;
#X restore 649 641 graph;
#X text 546 47 <= Front;
#X text 496 122 <= Back;
#X text 496 223 <= Front;
#X text 446 298 <= Back;
#X text 498 479 <= Back;
#X text 446 666 <= Back;
#X text 596 405 <= Front;
#X text 544 592 <= Front;
#X text 227 168 | Step |;
#X text 28 532 | Step |;
#X text 701 131 To the left \, there are no phase descontinuities (note how the back window (frame3) corresponds to the front window of the earlier output). This is because the hop size is the same as the increment step. In terms of phase different \, the hop size and step both corresponds to 90º., f 61;
#X text 701 217 Below we double the window size \, which gives us a new hop size that accounts for a phase difference of 180º \, while the step still corresponds to a phase difference of 90º - hence \, we have discontinuities and we can fix it with phase accumulation., f 61;
#X text 22 342 =========================================================================================, f 89;
#X text 701 297 See the (new-frame2) table as a front window. Its initial phase has a 180º difference to the back window. The pahse accumulation will change the phase of the next front window (new-frame4)., f 61;
#X text 701 367 Let's then get the phase difference of the front and back windows (which is 180º) and sum to the initial phase of the last output (the front window of the new-frame2 table \, this is also 180º). The initial phase after the phase accumulation is then 360º or 0º. Now when we justapose both frames as below we can see there are no discontinuities., f 61;
#X restore 795 250 pd Phase-Accum;
#X obj 318 494 tabreceive~ \$0-accum;
#X obj 320 521 table \$0-accum 1024;
#X obj 314 548 tabsend~ \$0-accum;
#X obj 27 236 pack float 46.43 float;
#X text 500 77 The grain controls generated here are sent to an [envgen~] object to read the samples. The step counter is the starting point of the sample \, the time duration of the grain is the window size in ms (46.43 in a sample rate of 44100 hz)., f 63;
#X obj 500 292 pic 0 ./gif/accum.gif empty empty 0 0;
#X text 500 140 The new hop size is used to access the last ("back") window. The phase accumulation consists in: 1) get the phase difference between the front and back window \, and: 2) sum that to the last phase output. Step 2 is done with a feedback loop via [tabsend~] & [tabreceive~] objects. Check the diagram below \, from Miller Puckette's book and the subpatch below with more information on how the phase accumulation process works:, f 63;
#X connect 0 0 57 2;
#X connect 1 0 0 1;
#X connect 1 0 13 0;
#X connect 2 0 17 0;
#X connect 3 0 22 0;
#X connect 4 0 10 0;
#X connect 5 0 9 0;
#X connect 6 0 5 0;
#X connect 7 0 12 0;
#X connect 8 0 57 0;
#X connect 8 1 0 0;
#X connect 9 0 8 0;
#X connect 9 0 21 0;
#X connect 10 0 9 1;
#X connect 12 0 29 1;
#X connect 13 0 7 0;
#X connect 14 0 16 2;
#X connect 16 0 5 1;
#X connect 17 0 19 0;
#X connect 19 0 21 1;
#X connect 21 0 16 0;
#X connect 22 0 1 0;
#X connect 27 0 42 0;
#X connect 28 0 43 0;
#X connect 29 0 32 0;
#X connect 30 0 32 2;
#X connect 30 0 33 2;
#X connect 32 0 27 0;
#X connect 33 0 28 0;
#X connect 34 0 29 0;
#X connect 34 0 33 0;
#X connect 37 0 44 0;
#X connect 38 0 36 0;
#X connect 39 0 50 0;
#X connect 40 0 45 0;
#X connect 40 1 45 1;
#X connect 41 0 46 0;
#X connect 41 1 46 1;
#X connect 42 0 40 0;
#X connect 43 0 41 0;
#X connect 44 0 38 0;
#X connect 45 1 39 1;
#X connect 46 0 47 0;
#X connect 46 1 39 0;
#X connect 47 0 37 0;
#X connect 47 1 37 1;
#X connect 50 0 47 1;
#X connect 50 0 56 0;
#X connect 54 0 50 1;
#X connect 57 0 34 0;
#X restore 90 489 pd Pitch.Shift-Time.Stretch;
#X obj 351 26 declare -path else;
#X text 40 56 This example expands an example previously presented in granulation for Time Stretch/Compress & Pitch Shift. We now include a spectral processing known as "Phase Vocoder". This term does not specify a single process but is an umbrella term for different spectral processes. In SuperCollider \, for instance \, you have a bunch of FFT ralted objects and they all start with "PV_" (which stands for 'Phase Vocoder')., f 70;
#X text 40 326 But when we have different grain and step sizes \, we also have phase discontinuities as the grains do not match anymore. No problem as the phase accumulation process removes these discontinuities. For that \, it needs two windows for each grain \, called "back" and "front" \, where the front window gets resynthesized in the output with a different phase information. Open the subpatch below for more info on how it works., f 70;
#X text 40 246 This example is on a fixed buffer. For keeping the patch simple \, we have a fixed window of 2048 and 4 overlaps. As before \, a parameter for transposition defines a grain size and you control a step size with a speed parameter. The original grain size is the FFT window size (2048) and the step is the hop size (512)., f 70;
#X text 40 165 We'll see later about 'Phase Vocoder Analysis' \, which is a type of analysis based on FFT that gives you more precise information for partial that you can use to feed a bank of oscillators. Here we do not have a bank of oscillators but a simple FFT/iFFT patch with a process known as "Phase accumulation"., f 70;
#X obj 318 500 initmess \; \$0-speed 100 \; \$0-transpo 0;
#X obj 433 479 sample~ \$0-sample bubul.wav, f 9;
#X obj 433 558 s \$0-size;
#X msg 433 531 \$1;
#X connect 0 0 7 1;
#X connect 1 0 7 2;
#X connect 2 0 7 0;
#X connect 7 0 5 0;
#X connect 14 0 16 0;
#X connect 16 0 15 0;
