#N canvas 393 51 916 656 12;
#X declare -path else;
#X obj 677 38 declare -path else;
#X obj 122 201 keyboard 17 80 3 3 0 0 empty empty;
#X obj 122 323 mtof;
#X obj 189 328 / 127;
#X obj 189 494 tabread4~ \$0-sample;
#X obj 237 564 out~;
#X obj 122 295 unpack f f;
#X obj 189 448 susloop~;
#X obj 189 356 tgl 20 0 empty empty empty 17 7 0 10 #dfdfdf #000000 #000000 0 1;
#X obj 562 401 sfinfo;
#X obj 562 429 route inst;
#X listbox 562 456 40 0 0 0 - - - 0;
#X msg 562 484 loop \$9 \$10;
#X obj 562 513 display;
#X msg 418 426 size \$1;
#X obj 418 345 trigger symbol symbol;
#X msg 562 374 read \$1 \, inst;
#X msg 418 373 open \$1;
#X obj 418 401 sample~ \$0-sample;
#X obj 418 454 display;
#X obj 418 579 s \$0-susloop;
#X obj 244 368 r \$0-susloop;
#X obj 514 488 mtof;
#X obj 514 562 s \$0-hz;
#X obj 49 312 r \$0-hz;
#X obj 122 392 /;
#X obj 237 530 *~;
#X text 125 42 If you have a sample with defnied and known looping points that sustains a note \, you can use it as a sampler-synth. You also need to know it's referenve frequency., f 47;
#X text 125 107 All you need to do then is have a frequency input and divide it by the reference frequency. The result is a ratio that can be used as the reading rate in [susloop~]., f 47;
#X text 37 277 reference frequency, f 9;
#X text 521 92 In this example we query the reference frequency and loop points from the metadata information of an .aif file. More specifically we get the "inst" chunk data from the file's header via the [sfinfo] object. We then use the reference frequency and sustain points for looping., f 50;
#X text 521 183 While you keep pressing the key \, the sample keeps looping. We also have a [glide2~] object for a release envelope when you release the key. you may want to not have this to allow the sample to play til the end., f 50;
#X obj 255 448 glide2~ 0 500;
#X floatatom 140 367 5 0 0 0 - - - 0;
#X floatatom 514 512 5 0 0 0 - - - 0;
#X obj 418 318 initmess symbol loop.aif;
#X connect 1 0 6 0;
#X connect 2 0 25 0;
#X connect 3 0 8 0;
#X connect 4 0 26 0;
#X connect 6 0 2 0;
#X connect 6 1 3 0;
#X connect 7 0 4 0;
#X connect 8 0 7 0;
#X connect 8 0 32 0;
#X connect 9 0 10 0;
#X connect 10 0 11 0;
#X connect 11 0 12 0;
#X connect 11 0 22 0;
#X connect 12 0 13 0;
#X connect 13 0 20 0;
#X connect 14 0 19 0;
#X connect 15 0 17 0;
#X connect 15 1 16 0;
#X connect 16 0 9 0;
#X connect 17 0 18 0;
#X connect 18 0 14 0;
#X connect 19 0 20 0;
#X connect 21 0 7 0;
#X connect 22 0 34 0;
#X connect 24 0 33 0;
#X connect 25 0 7 1;
#X connect 26 0 5 0;
#X connect 32 0 26 1;
#X connect 33 0 25 1;
#X connect 34 0 23 0;
#X connect 35 0 15 0;
